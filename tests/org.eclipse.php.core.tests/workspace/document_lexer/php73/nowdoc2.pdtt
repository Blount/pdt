--TEST--
Bug 551434 - false syntax error for Heredoc/Nowdoc expressions
--FILE--
<?php
class nowdocDemo {
    
    const EXAMPLE_1 = <<< 'NOWDOC'
Example string literal #1
    
-
NOWDOC;
    
    const EXAMPLE_2 = <<< 'NOWDOC'
Example string literal #2
    
-
NOWDOC;
    
    const EXAMPLE_3 = <<< 'NOWDOC'
Example string literal #3
    
=
NOWDOC;
    
    const EXAMPLE_4 = <<< 'NOWDOC'
Example string literal #4
    
-
NOWDOC;
    
    const EXAMPLE_5 = <<< "NOWDOC"
Example string literal #5

-
NOWDOC;
    
    const EXAMPLE_6 = <<< 'NOWDOC'
Example string literal #6
    
-
NOWDOC;
    
    const EXAMPLE_7 = <<< 'NOWDOC'
Example string literal #7
Another line with some content
Yet another line with some content
Another
    
-
NOWDOC;
    
    const EXAMPLE_8 = <<< 'NOWDOC'
Example string literal #8
    
- Content after the special char
NOWDOC;
    
    public $example9 = <<< 'NOWDOC'
Example string literal #9
    
-
NOWDOC;
    
    public function __construct() {
        
        $example10 = <<< 'NOWDOC'
Example string literal #10
    
-
NOWDOC;
        
        var_dump(
            <<< 'NOWDOC'
Example string literal #11
            
-
NOWDOC
            );
        
        <<< 'NOWDOC'
Example string literal
    
-
NOWDOC  && 1;
    }
}
?>
--EXPECT--
PHP_TOKEN|<|ST_PHP_IN_SCRIPTING
PHP_TOKEN|?|ST_PHP_IN_SCRIPTING
PHP_LABEL|php|ST_PHP_IN_SCRIPTING
WHITESPACE|
|ST_PHP_IN_SCRIPTING
PHP_CLASS|class|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_LABEL|nowdocDemo|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_CURLY_OPEN|{
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_1|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #1
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_2|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #2
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_3|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #3
    
=|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_4|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #4
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_5|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_HEREDOC_START_TAG|<<< "NOWDOC"
|ST_PHP_START_HEREDOC
PHP_ENCAPSED_AND_WHITESPACE|Example|ST_PHP_START_HEREDOC
PHP_ENCAPSED_AND_WHITESPACE| string|ST_PHP_START_HEREDOC
PHP_ENCAPSED_AND_WHITESPACE| literal|ST_PHP_START_HEREDOC
PHP_ENCAPSED_AND_WHITESPACE| #5
-|ST_PHP_END_HEREDOC
PHP_HEREDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_6|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #6
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_7|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #7
Another|ST_PHP_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| line with some content
Yet|ST_PHP_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| another line with some content
Another|ST_PHP_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_CONST|const|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|EXAMPLE_8|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #8
    
- Content after the special char|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_PUBLIC|public|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_VARIABLE|$example9|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #9
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    
    |ST_PHP_IN_SCRIPTING
PHP_PUBLIC|public|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_FUNCTION|function|ST_PHP_IDENTIFIER
WHITESPACE| |ST_PHP_IDENTIFIER
PHP_LABEL|__construct|ST_PHP_IN_SCRIPTING
PHP_TOKEN|(|ST_PHP_IN_SCRIPTING
PHP_TOKEN|)|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_CURLY_OPEN|{
        
        |ST_PHP_IN_SCRIPTING
PHP_VARIABLE|$example10|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_TOKEN|=|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #10
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
        
        |ST_PHP_IN_SCRIPTING
PHP_LABEL|var_dump|ST_PHP_IN_SCRIPTING
PHP_TOKEN|(|ST_PHP_IN_SCRIPTING
WHITESPACE|
            |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| #11
            
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
WHITESPACE|
            |ST_PHP_IN_SCRIPTING
PHP_TOKEN|)|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
        
        |ST_PHP_IN_SCRIPTING
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|Example|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| string|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING| literal|ST_PHP_START_NOWDOC
PHP_CONSTANT_ENCAPSED_STRING|
    
-|ST_PHP_END_NOWDOC
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|ST_PHP_IN_SCRIPTING
WHITESPACE|  |ST_PHP_IN_SCRIPTING
PHP_OPERATOR|&&|ST_PHP_IN_SCRIPTING
WHITESPACE| |ST_PHP_IN_SCRIPTING
PHP_NUMBER|1|ST_PHP_IN_SCRIPTING
PHP_SEMICOLON|;|ST_PHP_IN_SCRIPTING
WHITESPACE|
    |ST_PHP_IN_SCRIPTING
PHP_CURLY_CLOSE|}
|ST_PHP_IN_SCRIPTING
PHP_CURLY_CLOSE|}
|ST_PHP_IN_SCRIPTING
PHP_CLOSETAG|?>|ST_PHP_IN_SCRIPTING
