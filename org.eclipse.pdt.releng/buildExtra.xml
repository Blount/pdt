<project name="Build specific targets and properties">
	<!-- <property name="baseline" value="/home/zhaozw/Desktop/eclipse" />
	<property name="profile" value="${buildDirectory}/${SDKZip}" />
	<property name="baseline" value="/home/zhaozw/Desktop/pdt-SDK-S201006090518.zip" />
	<property name="profile" value="/home/zhaozw/Desktop/pdt-SDK-N201010231504.zip" />-->
	<property name="baseline" value="${buildDirectory}/${buildLabel}/${masterZip}" />
	<property name="profile" value="${buildDirectory}/${buildLabel}/${masterZip}" />
	<property name="report_location" value="${writableBuildRoot}/api" />
	<property name="html_report_location" value="${writableBuildRoot}/api-html" />
	<target name="preFetch">
		<echo>check out org.eclipse.test to ${buildDirectory}/plugins/, because Athen expects it as source</echo>
		<cvs cvsroot=":pserver:anonymous@dev.eclipse.org:/cvsroot/eclipse" package="org.eclipse.test" dest="${buildDirectory}/plugins/" tag="v20081002" />
		<cvs cvsroot=":pserver:anonymous@dev.eclipse.org:/cvsroot/eclipse" package="org.eclipse.test" dest="${buildDirectory}/dropins/" tag="v20081002" />
		<cvs cvsroot=":pserver:anonymous@dev.eclipse.org:/cvsroot/eclipse" package="org.eclipse.ant.optional.junit" dest="${buildDirectory}/plugins/" tag="v20080717" />
	</target>

	<target name="postFetch">
		<echo>Generate PHP parser</echo>
		<antcall target="generatePhpParserFiles">
			<param name="parserGenerator" value="${buildDirectory}/plugins/org.eclipse.php.core/Resources/parserTools/build.xml" />
		</antcall>
	</target>


	<target name="checkParserGeneratorExists">
		<available property="parserGeneratorExists" file="${parserGenerator}" />
	</target>

	<!-- Generate the PHP Parser classes -->
	<target name="generatePhpParserFiles" depends="checkParserGeneratorExists" if="parserGeneratorExists">
		<ant antfile="${parserGenerator}" />
	</target>
	<target name="postProcess">
		<echo>analysis  start=================================</echo>
		<apitooling.apigeneration projectname="org.eclipse.php.core" project="${buildDirectory}/plugins/org.eclipse.php.core" binary="${buildDirectory}/plugins/org.eclipse.php.core/@dot" target="${buildDirectory}/plugins/org.eclipse.php.core" debug="true" />
		<apitooling.apigeneration projectname="org.eclipse.php.ui" project="${buildDirectory}/plugins/org.eclipse.php.ui" binary="${buildDirectory}/plugins/org.eclipse.php.ui/@dot" target="${buildDirectory}/plugins/org.eclipse.php.ui" debug="true" />
		<apitooling.analysis baseline="${baseline}" profile="${profile}" report="${report_location}" debug="true" />
		<apitooling.analysis_reportconversion htmlfiles="${html_report_location}" xmlfiles="${report_location}" debug="true" />
	</target>
</project>