<html>
<head>
<title>Instructions</title>
<meta http-equiv="Content-Type" content="text/html;">
</head>

<body bgcolor="#FFFFFF" text="#000000">
<font size="+2"> Automated Testing for PHP Development Tools
Releases</font>
<p><font size="+1">Description</font></p>
<p>This document describes how to install and run the PDT JUnit test
plugins from a command line. This method is intended for anyone who
wishes to run the test written by the PDT team, and can be used in order
to automate their testing process.</p>
<p><font size="+1">Requirements</font></p>
<p>1. Java runtime environment version 1.4 or 1.5. See <A
	HREF="#testtargets">test targets</A> for details on which tests require
the 1.5 version. All other tests can be executed with either JRE levels.<BR>
2. The Eclipse test framework distribution- this package is supplied
with each and every one of the eclipse releases (for example - (<a
	href="http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops/R-3.2.1-200609210945/eclipse-test-framework-3.2.1.zip">eclipse-test-framework-3.2.1.zip</a>).<br>
3. <a href="http://www.info-zip.org/pub/infozip/UnZip.html">Info-ZIP
UnZip</a> version 5.41 or later<br>
<p><font size="+1">Setup</font></p>
<OL>
	<li>Create a root directory named "tests" directory<br>
	<li>Extract the all-in-one/pdt-all-in-one-I&lt;latest-date&gt;-win32/mac/linux.zip
	(For example: pdt-all-in-one-I20070101-win32.zip) to tests/pdt-testing directory.<br>
	<li>Extract pdt-Automated-Tests-I&lt;latest-date&gt;.zip (For example: pdt-Automated-Tests-I20070101.zip)
	to the tests directory.<br>
	<li>copy the tests/pdt-testing files to the tests directory.
	<li>Extract tests/pdt-junit-tests-<lable>.zip (For
	example: tests/pdt-junit-tests-I20070101.zip)<br>
	<li>Extract eclipse-test-framework-3.2.1.zip<b> Note:</b> When a
	Confirmation Dialog appears - Click Overwrite All
	</p>
</ol>
<font size="+1">Running Tests</font>
</p>
<p>From a command prompt or terminal:</p>
<p>1. cd to the pdt-testing directory<br>
2. Execute the following script:</p>
<p><b>Windows: runtests [-vm "path/to/java"]</b><br>
<b>Mac OS: runtests –ws (i.e carbon) –os (macosx) –arch (i.e ppc)</b><br>
<b>Linux: runtests –ws (i.e gtx) –os (linux) –arch (i.e x86)</b></p>
<p>All parameters and targets are optional. On *nix systems, the os,
ws and arch parameters must be specified in addition to the -properties
parameter.</p>
<p><font size="+1"><a name="vm"></a>Parameters</font></p>
<table width="90%" border="1">
	<tr>
		<td>Parameter</td>
		<td>Description</td>
	</tr>
	<tr>
		<td>-os &lt;operating system&gt;</td>
		<td>The OS the tests are being run on. One of: aix, hpux, linux,
		macosx, qnx, solaris, win32. <b>Default win32</b></td>
	</tr>
	<tr>
		<td>-ws &lt;windowing system&gt;</td>
		<td>The windowing system the tests are being run on. One of:
		carbon, motif, gtk, photon, win32. <b>Default win32</b></td>
	</tr>
	<tr>
		<td>-arch &lt;architecture&gt;</td>
		<td>The architecture the tests are being run on. One of: ppc,
		PA_RISC, x86, sparc. <b>Default x86</b></td>
	</tr>
	<tr>
		<td>-noclean</td>
		<td>Run tests without installing a clean Eclipse (in
		&quot;test-eclipse&quot;) between test targets. Default is to delete
		an existing test-eclipse directory and re-extract the Eclipse
		distribution between test targets.</td>
	</tr>
	<tr>
		<td>-properties</td>
		<td>
		<P>As per requirements noted above, this is used to reference a
		properties file containing additional Ant properties used in running
		tests.Can be used to pass additional vm arguments to the Java virtual
		machine running the tests by adding the entry
		&quot;extraVMargs=&lt;the args to pass to the vm&gt;&quot; to the
		specified properties file.<BR>
		<BR>
		At a minimum, the property file must include a &quot;J2SE-5.0&quot;
		property which specifies a path to a 1.5 java executable, for example:<BR>
		<BR>
		<B>J2SE-5.0=&quot;c:/program files/jdk1.5.0_06/jre/bin/java&quot;</B></P>
		<P>The path must be enclosed in double quotes if it contains
		spaces. This key-value pair is required to run JUnit plug-in tests
		that require a 1.5 level jvm.</P>
		</td>
	</tr>
	<tr>
		<td>-vm</td>
		<td>
		<P>When runtests is executed, two instances of eclipse are
		started: one to invoke the org.eclipse.ant.core.antRunner application
		to run a test.xml script in a test plug-in (outer instance) and
		another in which the JUnit tests are being executed (inner). By
		default, both will use the java executable on the system path. The -vm
		property is used to specify an alternate java executable. For example,
		&quot;-vm c:\jdk142\jre\bin\java&quot;.<BR>
		<BR>
		However, the -vm value is ignored by the inner vm for JUnit plug-in
		tests requiring a 1.5 JRE to execute (see <A HREF="#testtargets">test
		targets</A>). This property must be used in conjunction with the
		-properties parameter described above at all times.</P>
		</td>
	</tr>
	<tr>
		<td>-Dtest.target=performance</td>
		<td>Runs the performance target only in each test plug-in's
		test.xml. When running tests on Windows, enclose this parameter in
		double quotes, ie. runtests &quot;-Dtest.target=performance&quot;.</td>
	</tr>
	<tr>
		<td>targetname1 targetname2 targetname3 etc..</td>
		<td>
		<P>Replace with a list of <A HREF="#testtargets">test targets</A>
		to execute (space delineated). Each corresponds to an Ant target in
		the eclipse-testing/test.xml script. <BR>
		<BR>
		For example, <BR>
		<B>runtests -os linux -ws gtk -arch x86 ant antui -properties
		vm.properties</B><BR>
		This will execute the &quot;ant&quot; and &quot;antui&quot; test
		targets only. If not specified, the &quot;all&quot; target will be
		executed.<BR>
		</P>
		</td>
	</tr>
</table>
<p><font size="+1"><A NAME="testtargets"></A>Appendix A -
Test Targets</font></p>
<p>Ant targets in the main test.xml which execute tests. Typically
each corresponds to the execution of a test plug-in's test.xml.<BR>
</p>
<table width="90%" border="1">
	<tr>
		<td WIDTH="34%">Target name (special jvm requirements)</td>
		<td WIDTH="66%">Description / test plug-in</td>
	</tr>
	<tr>
		<td WIDTH="34%">all (<B>1.4 and 1.5 JREs required</B>)</td>
		<td WIDTH="66%">Runs all the targets below. Default.</td>
	</tr>
	<tr>
		<td WIDTH="34%">Bare</td>
		<td WIDTH="66%">org.eclipse.php.test.BareSuiteCase</td>
	</tr>
	<tr>
		<td WIDTH="34%">Headless</td>
		<td WIDTH="66%">org.eclipse.php.test.HeadlessSuiteCase</td>
	</tr>
	<tr>
		<td WIDTH="34%">GUI</td>
		<td WIDTH="66%">org.eclipse.php.test.GUISuiteCase</td>
	</tr>
</table>
<p><br>
</p>
<p><font size="+1"><a name="appendixb"></a>Appendix B-
Supported os, ws, and arch value combinations</font></p>
<p>The following table contains the values that can be used with the
-os, -ws, and -arch switches.</p>
<table width="75%" border="1">
	<tr>
		<td>Operating System (os)</td>
		<td>Windowing System (ws)</td>
		<td>Architecture (arch)</td>
	</tr>
	<tr>
		<td>aix</td>
		<td>motif</td>
		<td>ppc</td>
	</tr>
	<tr>
		<td>hpux</td>
		<td>motif</td>
		<td>PA_RISC</td>
	</tr>
	<tr>
		<td>linux</td>
		<td>gtk</td>
		<td>x86</td>
	</tr>
	<tr>
		<td>linux</td>
		<td>gtk</td>
		<td>x86_64</td>
	</tr>
	<tr>
		<td>linux</td>
		<td>gtk</td>
		<td>ppc</td>
	</tr>
	<tr>
		<td>linux</td>
		<td>motif</td>
		<td>x86</td>
	</tr>
	<tr>
		<td>macosx</td>
		<td>carbox</td>
		<td>ppc</td>
	</tr>
	<tr>
		<td>solaris</td>
		<td>gtk</td>
		<td>sparc</td>
	</tr>
	<tr>
		<td>solaris</td>
		<td>motif</td>
		<td>sparc</td>
	</tr>
	<tr>
		<td>win32</td>
		<td>win32</td>
		<td>x86</td>
	</tr>
</table>
</body>
</html>
